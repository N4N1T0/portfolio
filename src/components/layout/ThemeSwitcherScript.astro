<script>
  document.addEventListener('DOMContentLoaded', () => {
    const themeToggle = document.querySelectorAll(
      '#theme-toggle'
    ) as NodeListOf<HTMLButtonElement>
    const lightIcons = document.querySelectorAll(
      '.theme-pantone'
    ) as NodeListOf<HTMLSpanElement>
    const darkIcons = document.querySelectorAll(
      '.theme-original'
    ) as NodeListOf<HTMLSpanElement>

    if (localStorage.getItem('theme') === 'dark') {
      document.documentElement.classList.add('dark')
      darkIcons.forEach((icon) => icon.classList.remove('hidden'))
      lightIcons.forEach((icon) => icon.classList.add('hidden'))
    } else {
      document.documentElement.classList.remove('dark')
      darkIcons.forEach((icon) => icon.classList.add('hidden'))
      lightIcons.forEach((icon) => icon.classList.remove('hidden'))
    }

    themeToggle.forEach((button) => {
      button.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark')
        if (document.documentElement.classList.contains('dark')) {
          localStorage.setItem('theme', 'dark')
          darkIcons.forEach((icon) => icon.classList.remove('hidden'))
          lightIcons.forEach((icon) => icon.classList.add('hidden'))
        } else {
          localStorage.setItem('theme', 'light')
          darkIcons.forEach((icon) => icon.classList.add('hidden'))
          lightIcons.forEach((icon) => icon.classList.remove('hidden'))
        }
      })
    })
  })
</script>
